# WordPress側で必要な作業

## 重要なお知らせ

`tax_office`カスタム投稿タイプのスラッグを`services`に変更したため、WordPressで以下の作業が必要です。

## 必須作業

### 1. 固定ページ「サービス」を削除

1. WordPress管理画面にログイン
2. 「固定ページ」→「固定ページ一覧」
3. 「サービス」ページを見つける
4. 「ゴミ箱へ移動」をクリック
5. 「ゴミ箱」から完全に削除

**理由**: `/services/`は`tax_office`のアーカイブページになるため、固定ページは不要です。

### 2. パーマリンク設定を更新

1. 「設定」→「パーマリンク設定」
2. 何も変更せずに「変更を保存」をクリック

**理由**: WordPressのリライトルールを更新して、新しいスラッグを認識させます。

### 3. 動作確認

1. `/services/`にアクセス
   - 税理士サービスと税理士事務所が表示されることを確認
   
2. ページネーションをクリック
   - `/services/page/2/`に移動することを確認
   - 404エラーが表示されないことを確認
   
3. 検索フィルターを使用
   - 得意業種、得意分野、都道府県で絞り込み
   - 検索条件を維持したままページ移動できることを確認

## 変更内容のまとめ

| 項目 | 変更前 | 変更後 |
|-----|--------|--------|
| 税理士事務所のURL | `/tax-office/事務所名/` | `/services/事務所名/` |
| アーカイブページ | `/tax-office/` | `/services/` |
| ページネーション | 固定ページ（404エラー） | `/services/page/2/`（正常動作） |

## トラブルシューティング

### 問題: `/services/`にアクセスすると404エラー

**解決策**:
1. パーマリンク設定を更新（上記の手順2）
2. ブラウザのキャッシュをクリア
3. WordPressのキャッシュプラグインをクリア（使用している場合）

### 問題: 固定ページ「サービス」が削除できない

**解決策**:
1. 一旦「下書き」に変更
2. スラッグを`services-old`に変更
3. 削除

### 問題: 税理士事務所の個別ページが404エラー

**解決策**:
1. パーマリンク設定を更新
2. それでも解決しない場合は、functions.phpの以下のコードを一時的に削除:
   ```php
   add_action('init', function() {
       global $wp;
       $wp->add_query_var('paged');
   });
   
   add_action('parse_request', function($wp) {
       if (isset($_GET['paged']) && !empty($_GET['paged'])) {
           $wp->query_vars['paged'] = intval($_GET['paged']);
       }
   });
   ```

## 期待される結果

- `/services/`で税理士サービスと税理士事務所の両方が表示される
- ページネーションが正しく動作する（`/services/page/2/`）
- 検索フィルターで絞り込みができる
- 検索条件を維持したままページ移動ができる
